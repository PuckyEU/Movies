"use strict";(self.webpackChunkmyfavmovies=self.webpackChunkmyfavmovies||[]).push([[788,317],{5788:function(t,e,n){n.r(e),n.d(e,{default:function(){return N}});var a=n(2982),i=n(4165),r=n(5861),s=n(885),o=n(3253),l=n(2791),c=n(4244),u=n(1508),d=n(3811),h=n(9823),v=n(8712),f=n(9062),m=n(8931),p=n(1523),x=n(6856),g=n(4569),b=n.n(g),y=n(3442),Z=n(4317),j=n(6320),k=n(8617),w=n(184);function N(t){var e=t.isNew,n=t.preview,g=(0,m.UO)().nameQ,N=(0,l.useState)(e?"":g),_=(0,s.Z)(N,2),C=_[0],S=_[1],I=(0,l.useState)(""),A=(0,s.Z)(I,2),B=A[0],E=A[1],L=(0,l.useState)(""),P=(0,s.Z)(L,2),U=P[0],M=P[1],R=(0,l.useState)(""),T=(0,s.Z)(R,2),z=T[0],q=T[1],V=(0,l.useState)([]),D=(0,s.Z)(V,2),F=D[0],J=D[1],O=(0,l.useState)([]),Q=(0,s.Z)(O,2),W=Q[0],G=Q[1],H=(0,l.useState)(""),K=(0,s.Z)(H,2),X=K[0],Y=K[1],$=(0,l.useState)(!1),tt=(0,s.Z)($,2),et=tt[0],nt=tt[1],at=(0,l.useState)(""),it=(0,s.Z)(at,2),rt=it[0],st=it[1],ot=(0,l.useState)(!1),lt=(0,s.Z)(ot,2),ct=lt[0],ut=lt[1],dt=(0,l.useState)(!0),ht=(0,s.Z)(dt,2),vt=ht[0],ft=ht[1],mt=(0,l.useState)(!1),pt=(0,s.Z)(mt,2),xt=pt[0],gt=pt[1];function bt(t){E(t.target.value)}function yt(){return(yt=(0,r.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==C){t.next=4;break}return Y("Name is Required!"),nt(!0),t.abrupt("return");case 4:return n=v.I8.currentUser.uid.toString().trim(),t.prev=5,t.next=8,(0,f.pl)((0,f.JU)(v.db,"users",n,"lists",C.toString()),{name:C,description:B,backdrop:U,movies:W});case 8:return st(e?"Successfully Created or Edited the List under the name: ".concat(C):"Successfully Edited the List under the name: ".concat(C)),ut(!0),t.next=12,(0,j.g)(5e3);case 12:ut(!1),t.next=20;break;case 15:t.prev=15,t.t0=t.catch(5),console.error("Error adding document: ",t.t0),Y(t.t0),nt(!0);case 20:case"end":return t.stop()}}),t,null,[[5,15]])})))).apply(this,arguments)}function Zt(){return(Zt=(0,r.Z)((0,i.Z)().mark((function t(e){var n,a,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e&&void 0!==e&&""!==e){t.next=2;break}return t.abrupt("return");case 2:n=!1,"'"===e.at(0)&&"'"===e.at(e.length-1)&&(n=!0),n?function(){var t,n,a,i=e.substring(1,e.length-1).split(","),r=[],s=i.length;i.length>=10&&(s=10),console.log(s);for(var o=0;o<s;o++)if(""!==i[o]&&!isNaN(i[o].substring(1,i[o].length))){var l=void 0,c=i[o].substring(1,i[o].length);switch(i[o].at(0)){case"m":l="https://api.themoviedb.org/3/movie/".concat(c,"?api_key=").concat(y.ZP.key,"&language=").concat(null===(t=document.getElementById("root"))||void 0===t?void 0:t.getAttribute("langvalue"));break;case"t":l="https://api.themoviedb.org/3/tv/".concat(c,"?api_key=").concat(y.ZP.key,"&language=").concat(null===(n=document.getElementById("root"))||void 0===n?void 0:n.getAttribute("langvalue"));break;case"p":l="https://api.themoviedb.org/3/person/".concat(c,"?api_key=").concat(y.ZP.key,"&language=").concat(null===(a=document.getElementById("root"))||void 0===a?void 0:a.getAttribute("langvalue"));break;default:continue}b().get(l).then((function(t){var e={};e.id=t.data.id,t.data.title&&(e.title=t.data.title),t.data.name&&(e.name=t.data.name),t.data.poster_path&&(e.poster_path=t.data.poster_path),t.data.profile_path&&(e.profile_path=t.data.profile_path),t.data.backdrop_path&&(e.backdrop_path=t.data.backdrop_path),t.data.release_date&&(e.release_date=t.data.release_date),t.data.overview&&(e.overview=t.data.overview),t.data.biography&&(e.biography=t.data.biography),r.push(e)})).catch((function(t){return console.error(t)}))}W.map((function(t){r.push(t)})),G(r)}():(r="https://api.themoviedb.org/3/search/multi?api_key=".concat(y.ZP.key,"&language=").concat(null===(a=document.getElementById("root"))||void 0===a?void 0:a.getAttribute("langvalue"),"&query=").concat(e,"&include_adult=true"),b().get(r).then((function(t){J(t.data.results)})).then((function(){ft(!1)})).catch((function(t){return console.error(t)})));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function jt(t,e){if((!0!==e||0!==t)&&(!1!==e||t+1!==W.length)){var n=W.swap(t,!0===e?t-1:t+1);G(n)}}return(0,l.useEffect)((function(){v.I8.onAuthStateChanged(function(){var t=(0,r.Z)((0,i.Z)().mark((function t(e){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=10;break}return gt(!0),n=[],t.next=5,(0,f.PL)((0,f.hJ)(v.db,"users",v.I8.currentUser.uid.toString(),"lists"));case 5:t.sent.forEach((function(t){t.data().name===g&&(n.push(t.data()),E(t.data().description),M(t.data().backdrop),G(t.data().movies))})),console.log(n),t.next=11;break;case 10:gt(!1);case 11:ft(!1);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[g]),Array.prototype.swap=function(t,e){var n=this[t];return this[t]=this[e],this[e]=n,this},xt?!vt&&(0,w.jsx)(o.Z,{children:(0,w.jsxs)("div",{className:"min-h-[100vh] h-fit w-[70%] ml-auto mr-auto",children:[(0,w.jsx)("div",{className:"text-[4vh] text-center font-bold",children:e?"Create a New List":n?C:"Edit "+C}),(0,w.jsx)(p.rU,{to:n?"/edit-list/".concat(C,"/"):"/list/".concat(C,"/"),className:"text-[2vh] text-[#838383] text-center italic mb-5",children:e?"":n?"Click here to edit "+C:"Click here to preview "+C}),n?(0,w.jsx)("textarea",{className:"text-[3vh] text-[#838383] text-center italic mb-5 bg-[#131313] w-full h-[16vh]",name:"list_description",style:{resize:"none"},cols:"40",rows:"5",onChange:bt,disabled:!0,value:B,placeholder:"My Favorite Movies"}):null,X?(0,w.jsx)(c.Z,{in:et,children:(0,w.jsx)(u.Z,{className:"mt-2",variant:"filled",severity:"error",action:(0,w.jsx)(d.Z,{size:"small",onClick:function(){return nt(!1)},children:(0,w.jsx)(h.Z,{fontSize:"inherit"})}),children:X.toString()})}):null,n?(0,w.jsx)("div",{children:0!==W.length?W.map((function(t,e){return(0,Z.getResultType)(t,e)})):(0,w.jsx)("div",{className:"font-bold text-left mb-4",children:"No Items Added"})}):(0,w.jsxs)("form",{children:[(0,w.jsx)("div",{className:"text-left font-bold mb-2 text-[3vh]",children:"Name *"}),(0,w.jsx)("input",{className:"text_field w-full h-[6vh]",type:"text",onChange:function(t){S(t.target.value)},value:C,placeholder:"My Awesome List"}),(0,w.jsx)("div",{className:"text-left font-bold mb-2 text-[3vh]",children:"Description"}),(0,w.jsx)("textarea",{className:"text_field w-full h-[16vh]",name:"list_description",cols:"40",rows:"5",onChange:bt,value:B,placeholder:"My Favorite Movies"}),(0,w.jsx)("div",{className:"text-left font-bold mb-2 text-[3vh]",children:"Backdrop Link"}),(0,w.jsx)("input",{className:"text_field w-full h-[6vh]",type:"text",placeholder:"https://example.com/",onChange:function(t){M(t.target.value)},value:U}),(0,w.jsx)("div",{className:"text-left font-bold text-[3vh]",children:"Add Items"}),(0,w.jsx)("div",{className:"text-left text-[#838383] italic mb-2 mt-[-0.25rem] text-[2vh]",children:'To quickly add items, write the type ("m" for movie, "t" for tv, "p" for person) and their ID in apostrophes. If you want to add multiple, separate them with a comma, e.g. \'m157336,m238,p976\'. Limit is 10 items at a time'}),(0,w.jsxs)("div",{className:"flex",children:[(0,w.jsx)("input",{className:"text_field w-full h-[6vh] mr-1",type:"text",placeholder:"Interstellar",onChange:function(t){q(t.target.value)},value:z}),(0,w.jsx)("div",{className:"w-fit h-[6vh] search-button button cursor-pointer",onClick:function(){return function(t){return Zt.apply(this,arguments)}(z)},children:(0,w.jsx)(x.vU7,{className:"w-full h-full"})}),(0,w.jsx)("div",{className:"w-[0.25rem]"}),(0,w.jsx)("div",{className:"w-fit h-[6vh] search-button button cursor-pointer",onClick:function(){return J(null)},children:(0,w.jsx)(x.B4e,{className:"w-full h-full"})})]}),null===F||void 0===F?void 0:F.map((function(t,e){return(0,w.jsxs)("div",{className:"flex_center relative",children:[(0,w.jsx)("div",{className:"w-[10%] h-[40vh] cursor-pointer flex_center",onClick:function(){return function(t){var e=(0,a.Z)(W);e.push(t),G(e)}(t)},children:(0,w.jsx)(x.WZt,{})}),(0,Z.getResultType)(t,e)]})})),(0,w.jsx)("div",{className:"text-left font-bold mb-2 text-[3vh]",children:"Added Items"}),null===W||void 0===W?void 0:W.map((function(t,e){return(0,w.jsxs)("div",{className:"text-left font-bold mb-4 h-[6vh] flex items-center",children:[(0,w.jsx)(k.ALZ,{className:"h-[3vh] w-[3vh] cursor-pointer",onClick:function(){return jt(e,!0)}}),(0,w.jsx)(k.kWQ,{className:"h-[3vh] w-[3vh] cursor-pointer",onClick:function(){return jt(e,!1)}}),null!==t&&void 0!==t&&t.title?null===t||void 0===t?void 0:t.title:null===t||void 0===t?void 0:t.name,(0,w.jsx)(x.B4e,{className:"ml-2 w-[2vh] h-[2vh] cursor-pointer",onClick:function(){return function(t){var e=(0,a.Z)(W);e.splice(t,1),G(e)}(e)}})]},e)})),0===W.length?(0,w.jsx)("div",{className:"font-bold text-left mb-4",children:"No Items Added"}):null,rt?(0,w.jsx)(c.Z,{in:ct,children:(0,w.jsx)(u.Z,{className:"mb-2",variant:"filled",severity:"success",action:(0,w.jsx)(d.Z,{size:"small",onClick:function(){return ut(!1)},children:(0,w.jsx)(h.Z,{fontSize:"inherit"})}),children:rt.toString()})}):null,(0,w.jsx)("input",{className:"settings-btn button cursor-pointer",type:"button",value:"".concat(e?"Create My List":"Edit My List"),onClick:function(){return function(){return yt.apply(this,arguments)}()}})]})]})}):(0,w.jsx)(o.Z,{children:(0,w.jsx)(p.rU,{to:"/login/",children:(0,w.jsx)("div",{className:"h-[100vh] font-bold text-[4vh]",children:"Please Log in to Edit Lists"})})})}},4317:function(t,e,n){n.r(e),n.d(e,{default:function(){return p},getResultType:function(){return x}});var a=n(4165),i=n(5861),r=n(885),s=n(3253),o=n(8931),l=n(2791),c=n(8712),u=n(4061),d=n(4569),h=n.n(d),v=n(3442),f=n(9606),m=n(184);function p(){var t,e=(0,o.UO)().searchParams,n="https://api.themoviedb.org/3/search/multi?api_key=".concat(v.ZP.key,"&language=").concat(null===(t=document.getElementById("root"))||void 0===t?void 0:t.getAttribute("langvalue"),"&query=").concat(e,"&include_adult=true"),d=(0,l.useState)([]),f=(0,r.Z)(d,2),p=f[0],g=f[1],b=(0,l.useState)(!0),y=(0,r.Z)(b,2),Z=y[0],j=y[1];return(0,l.useEffect)((function(){c.I8.onAuthStateChanged(function(){var t=(0,i.Z)((0,a.Z)().mark((function t(e){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,(0,u.Z)().then((function(){h().get(n).then((function(t){console.log(t.data),g(t.data)})).then((function(){j(!1)})).catch((function(t){return console.error(t)}))})).catch((function(t){return console.error(t)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[n]),!Z&&(0,m.jsx)(s.Z,{children:(0,m.jsx)("div",{className:"h-fit p-5",children:p.results.map((function(t,e){return x(t,e)}))})})}function x(t,e){return console.log(t),"movie"===t.media_type||void 0!==t.title?(0,m.jsx)(f.Z,{item:t,deleteButton:!1,showRating:!1,isTV:!1,isPerson:!1,isCustom:!1,editButton:!1},e):"tv"===t.media_type||void 0!==t.first_air_date?(0,m.jsx)(f.Z,{item:t,deleteButton:!1,showRating:!1,isTV:!0,isPerson:!1,isCustom:!1,editButton:!1},e):"person"===t.media_type||void 0!==t.biography?(0,m.jsx)(f.Z,{item:t,deleteButton:!1,showRating:!1,isTV:!1,isPerson:!0,isCustom:!1,editButton:!1},e):void 0}}}]);
//# sourceMappingURL=788.8e5f7970.chunk.js.map